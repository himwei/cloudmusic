<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <script>


        window.onload=function()
        {
            var Otext = document.getElementById("text");
            var Osubmit = document.getElementById("submit");
            var id = "";
            Osubmit.onclick=function()
            {
                if(Otext.value=="")
                {
                    alert("请重新输入");
                }
                else
                {
                    id = Otext.value;
                    // 调用函数
                    getData();
                
                }
            }

                async function getData() 
                {
                // 获取 response
                const response = await fetch("https://api.imjad.cn/cloudmusic/?type=song&br=320000&id="+id);
                // 获取结果 JSON
                const posts = await response.json();

                // 打印结果
                //console.log(posts['data']['0']['url']);
                const url = posts['data']['0']['url'];
                
                const br = posts['data']['0']['br']+"";

                const kbps = br.substr(0,3)+"kbps"; 
                // const Oaudio = document.createElement("a");
                // Oaudio.href=url;
                // Oaudio.value="123";
                // Oaudio.controls="";
                // Oaudio.autoplay="";
                const Odiv = document.getElementById("root");
                Odiv.innerHTML="音质为"+kbps+"<audio src='"+url+"' controls='' autoplay='autoplay' style='width: 100%;'></audio>";
                //Odiv.append(Oaudio);
                };

                

        }
        
        

    </script>
</head>
<body>
    <input type="text" id="text" placeholder="请输入歌曲的id号"></input>
    <input type="submit" id="submit">

    <div id="root"></div>
</body>
</html>
